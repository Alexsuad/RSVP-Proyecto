<!--
  Archivo: public/app/rsvp-form.html
  Descripci√≥n: Formulario principal de confirmaci√≥n de asistencia (RSVP)
               para invitados autenticados en el sistema de boda.
  Notas:
    - Mantiene la misma estructura visual que login, recover-code y request-access.
    - La l√≥gica de carga y env√≠o de datos se implementa en assets/js/pages/rsvp-form.js.
-->

<!DOCTYPE html>
<html lang="es">
  <head>
    <!--
      Bloque: Metadatos y recursos globales
      - Define codificaci√≥n, viewport y t√≠tulo de la pesta√±a.
      - Carga tipograf√≠as y hojas de estilo compartidas entre p√°ginas.
    -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Confirmar asistencia ‚Ä¢ Boda Daniela & Cristian</title>

    <!-- Tipograf√≠as compartidas (Playfair Display + Inter) -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link
      rel="preconnect"
      href="https://fonts.gstatic.com"
      crossorigin
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Playfair+Display:wght@700&display=swap"
      rel="stylesheet"
    />

    <!--
      Hojas de estilo compartidas:
      - base.css   ‚Üí reset, tipograf√≠a y colores base.
      - layout.css ‚Üí estructura general de header, main y footer.
      - forms.css  ‚Üí estilos comunes de formularios y tarjetas.
      - login.css  ‚Üí estilos espec√≠ficos reutilizados para tarjetas centradas.
    -->
    <link rel="stylesheet" href="/assets/css/base.css" />
    <link rel="stylesheet" href="/assets/css/layout.css" />
    <link rel="stylesheet" href="/assets/css/forms.css" />
    <link rel="stylesheet" href="/assets/css/login.css" />

    <!-- (Opcional) Ajustes espec√≠ficos de esta p√°gina -->
    <link rel="stylesheet" href="/assets/css/rsvp-form.css" />
  </head>

  <body class="site-body">
    <!--
      Bloque: Cabecera y h√©roe
      - Muestra el nombre de la pareja y el subt√≠tulo fijo del evento.
      - Mantiene la foto de fondo y el selector de idioma, igual que en otras p√°ginas.
    -->
    <!-- Se reutiliza el mismo hero-header que en login.html para mantener coherencia visual -->
    <header class="hero-header">
      <div class="hero-header__content">
        <h1 class="hero-header__title">Daniela &amp; Cristian</h1>
        <p class="hero-header__subtitle">
          UNA FECHA, UN LUGAR, UN AMOR ETERNO. SOLO FALTA TU PRESENCIA.
        </p>
      </div>

      <!-- Selector de idioma (componente visual; la l√≥gica se aplica desde JS global si procede) -->
      <div class="lang-switcher">
        <button class="lang-switcher__btn" data-lang="es" title="Espa√±ol">üá™üá∏</button>
        <button class="lang-switcher__btn" data-lang="en" title="English">üá¨üáß</button>
        <button class="lang-switcher__btn" data-lang="ro" title="Rom√¢nƒÉ">üá∑üá¥</button>
      </div>
    </header>

    <!--
      Bloque: Contenido principal
      - Contenedor centrado que aloja la tarjeta del formulario.
      - Sigue el mismo patr√≥n de tarjeta que login / recover / request.
    -->
    <main class="site-main">
      <section class="section section--rsvp">
        <div class="section__inner">
          <!-- Tarjeta principal del formulario RSVP -->
          <article class="auth-card auth-card--rsvp">
            <!--
              Bloque: Cabecera de la tarjeta
              - Presenta el t√≠tulo principal y un resumen breve del prop√≥sito del formulario.
              - Los elementos con id (guest-greeting, invitation-summary, event-times) est√°n
                pensados para que rsvp-form.js pueda mostrar informaci√≥n personalizada
                obtenida de la API (nombre del invitado, tipo de invitaci√≥n, horarios, etc.).
            -->
            <header class="auth-card__header">
              <h2 id="rsvp-title" class="auth-card__title">
                Confirmar asistencia
              </h2>
              <p class="auth-card__subtitle">
                Revisa los datos de tu invitaci√≥n, dinos si podr√°s asistir y cu√°ntas personas
                vendr√°n contigo. Tambi√©n puedes indicarnos alergias o necesidades especiales.
              </p>

              <div class="auth-card__meta" aria-live="polite">
                <p class="auth-card__meta-line">
                  <span id="guest-greeting" class="auth-card__meta-strong">
                    Hola, invitado. En esta p√°gina podr√°s confirmar tu asistencia.
                  </span>
                </p>
                <p class="auth-card__meta-line">
                  <span id="invitation-summary">
                    Tus datos de invitaci√≥n se cargar√°n autom√°ticamente a partir de tu c√≥digo.
                  </span>
                </p>
                <p class="auth-card__meta-line">
                  <span id="event-times">
                    Cuando la configuraci√≥n est√© completa, aqu√≠ ver√°s los horarios clave de la boda.
                  </span>
                </p>
              </div>
            </header>

            <!--
              Bloque: Formulario RSVP
              - El formulario se completa con datos del invitado autenticado.
              - El env√≠o se maneja desde assets/js/pages/rsvp-form.js.
            -->
            <form id="rsvp-form" class="form" novalidate>
              <!-- Mensajes globales de error/√©xito del formulario -->
              <div
                id="form-feedback"
                class="form-feedback"
                role="alert"
                aria-live="polite"
              ></div>

              <!--
                Grupo: Selecci√≥n de asistencia
                - El invitado indica si asistir√° o no al evento.
                - La l√≥gica interna (mostrar mensajes o simplificar el formulario)
                  se gestiona en rsvp-form.js.
              -->
              <fieldset class="form-group form-group--attending">
                <legend class="form-group__legend">
                  ¬øPodr√°s acompa√±arnos el d√≠a de la boda?
                </legend>
                <p class="form-group__description">
                  Selecciona si asistir√°s o no. Si no puedes venir, igualmente podr√°s
                  dejarnos un mensaje para los novios.
                </p>

                <div class="radio-group">
                  <label class="radio-option">
                    <input
                      type="radio"
                      name="attending"
                      value="yes"
                      required
                    />
                    <span> S√≠, asistir√© </span>
                  </label>

                  <label class="radio-option">
                    <input
                      type="radio"
                      name="attending"
                      value="no"
                      required
                    />
                    <span> No podr√© asistir </span>
                  </label>
                </div>
              </fieldset>

              <p class="form-field__hint">
                Si eliges "No podr√© asistir", igualmente podr√°s dejarnos tus datos de contacto
                y un mensaje para los novios en los campos de m√°s abajo.
              </p>

              <!--
                Grupo: Datos de contacto
                - Permite revisar/actualizar correo y tel√©fono del invitado.
                - Estos datos se env√≠an junto con la respuesta de RSVP.
              -->
              <div class="form-field">
                <label for="email" class="form-field__label">
                  Correo electr√≥nico
                </label>
                <input
                  id="email"
                  name="email"
                  type="email"
                  class="form-field__input"
                  placeholder="tu-correo@ejemplo.com"
                  autocomplete="email"
                />
                <p class="form-field__hint">
                  Puedes dejar tu correo electr√≥nico. Al menos uno de los dos datos de contacto
                  (correo o tel√©fono) debe estar relleno para poder avisarte de cambios.
                </p>
              </div>

              <div class="form-field">
                <label for="phone" class="form-field__label">
                  Tel√©fono de contacto
                </label>
                <input
                  id="phone"
                  name="phone"
                  type="tel"
                  class="form-field__input"
                  placeholder="+34 600 123 123"
                  autocomplete="tel"
                />
                <p class="form-field__hint">
                  Si lo prefieres, puedes dejar solo tu tel√©fono. Basta con completar
                  cualquiera de los dos campos (correo o tel√©fono) para que podamos contactarte.
                </p>
              </div>

              <!--
                Grupo: Acompa√±antes
                - El contenedor #companions-container se rellena din√°micamente desde JS,
                  respetando el m√°ximo de acompa√±antes permitido por la invitaci√≥n.
              -->
              <section class="form-group form-group--companions">
                <header class="form-group__header">
                  <h3 class="form-group__title">Acompa√±antes</h3>
                  <p class="form-group__subtitle">
                    Indica las personas que vendr√°n contigo. En funci√≥n de tu invitaci√≥n,
                    el sistema limitar√° el n√∫mero m√°ximo de acompa√±antes permitidos.
                  </p>
                  <p class="form-group__meta" id="companions-limit-text">
                    Podr√°s a√±adir acompa√±antes hasta el m√°ximo indicado para tu invitaci√≥n.
                  </p>
                </header>

                <div id="companions-container" class="companions-container">
                  <!--
                    Aqu√≠ se inyectan, desde rsvp-form.js, los campos de cada acompa√±ante:
                      - Nombre del acompa√±ante
                      - Adulto / Ni√±o
                      - Alergias
                  -->
                </div>

                <button
                  type="button"
                  id="add-companion-btn"
                  class="btn btn--ghost btn--full"
                >
                  + A√±adir acompa√±ante
                </button>
              </section>

              <!--
                Grupo: Alergias y notas
                - Alergias del invitado principal.
                - Mensaje abierto para detalles adicionales.
              -->
              <div class="form-field">
                <label for="allergies" class="form-field__label">
                  Alergias o restricciones alimentarias (titular)
                </label>
                <input
                  id="allergies"
                  name="allergies"
                  type="text"
                  class="form-field__input"
                  placeholder="Ejemplo: frutos secos, marisco..."
                />
                <p class="form-field__hint">
                  Si lo prefieres, puedes dejarlo vac√≠o o completarlo m√°s adelante.
                </p>
              </div>

              <div class="form-field">
                <label for="notes" class="form-field__label">
                  Mensaje para los novios
                </label>
                <textarea
                  id="notes"
                  name="notes"
                  rows="4"
                  class="form-field__textarea"
                  placeholder="¬øQuieres dejarnos alg√∫n mensaje especial o detalle a tener en cuenta?"
                ></textarea>
                <p class="form-field__hint">
                  Puedes escribir un mensaje breve. Por ejemplo, si alg√∫n invitado necesita
                  un tipo de men√∫ especial o si quieres compartir algo importante.
                </p>
              </div>

              <!--
                Grupo: Acciones
                - Bot√≥n principal de env√≠o.
                - Enlace para volver a la pantalla de login (confirmaci√≥n de c√≥digo).
              -->
              <div class="form-actions">
                <button type="submit" class="btn btn--primary btn--full">
                  Enviar confirmaci√≥n
                </button>
              </div>

              <p class="form-secondary-link">
                <a href="/app/login.html">
                  Volver a confirmar c√≥digo de invitaci√≥n
                </a>
              </p>
            </form>
          </article>
        </div>
      </section>
    </main>

    <!--
      Bloque: Pie de p√°gina
      - Mensaje de proyecto acad√©mico.
    -->
    <footer class="site-footer">
      <p class="site-footer__text">
        Proyecto acad√©mico ‚Äì Sistema RSVP para bodas
      </p>
    </footer>

    <!--
      Bloque: Scripts
      - Carga el m√≥dulo de JavaScript espec√≠fico de esta p√°gina.
      - En rsvp-form.js se implementan:
        ¬∑ Carga inicial de datos del invitado autenticado.
        ¬∑ Gesti√≥n din√°mica de acompa√±antes.
        ¬∑ Env√≠o del formulario a /api/guest/me/rsvp.
    -->
    <script type="module" src="/assets/js/pages/rsvp-form.js"></script>
  </body>
</html>
